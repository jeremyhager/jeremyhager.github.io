<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="search" type="application/opensearchdescription+xml" title="Yugawa" href="/opensearch.xml"><title data-react-helmet="true">Setting up Bind | Yugawa</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Setting up Bind | Yugawa"><meta data-react-helmet="true" name="description" content="This guide assumes you&#x27;ve already gone through the base vm server setup tutorial."><meta data-react-helmet="true" property="og:description" content="This guide assumes you&#x27;ve already gone through the base vm server setup tutorial."><meta data-react-helmet="true" property="og:url" content="https://yugawa.xyz/docs/setting-up-bind"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://yugawa.xyz/docs/setting-up-bind"><link rel="stylesheet" href="/styles.930fbcc3.css">
<link rel="preload" href="/styles.9ed38f55.js" as="script">
<link rel="preload" href="/runtime~main.3f7d2eb6.js" as="script">
<link rel="preload" href="/main.43380630.js" as="script">
<link rel="preload" href="/1.7218b6cd.js" as="script">
<link rel="preload" href="/2.f67aa846.js" as="script">
<link rel="preload" href="/78.cedd157f.js" as="script">
<link rel="preload" href="/82.876600dc.js" as="script">
<link rel="preload" href="/935f2afb.dc322b7b.js" as="script">
<link rel="preload" href="/17896441.b2c94a2f.js" as="script">
<link rel="preload" href="/078b6ab9.d9c4418b.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Yugawa</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/aboutMe">About Me</a><a href="https://github.com/jeremyhager/yugawa-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Yugawa</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/aboutMe">About Me</a></li><li class="menu__list-item"><a href="https://github.com/jeremyhager/yugawa-website" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Internal.VirtNet</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Internal.Virtnet Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/centos8-hypervisor">Hypervisor Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/documentation-server">Documentation Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/foreman">Foreman Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/dns-dhcp">dns-dhcp Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ldap1-ldap2">Ldap servers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pfsense-router">PfSense Router</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">How-To&#x27;s</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Libvirt</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/creating-new-network">Creating new VM network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pfsense-as-vm">pfSense as a VM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/base-vm-server-setup">Base vm server setup</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/setting-up-bind">Setting up Bind</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintaining-dns">Maintaining DNS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/setting-up-dhcp">Setting up dhcp</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Foreman</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installing-foreman-with-katello">Installing Foreman with Katello</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuring-foreman-terminal">Configuring Foreman in the terminal</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/foreman-content-keys-backup">Content views, activation keys, and backing up</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tftp-with-foreman">PXE boot using Foreman</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/creating-foreman-hosts">Creating foreman hosts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">LDAP</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/setting-up-ldap-servers">Setting up ldap servers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuring-ldap">Configuring ldap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/creating-ldap-users">Creating users</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/enrolling-foreman-ldap">Enrolling Foreman</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/manual-enrollment-ldap">Manual Enrollment</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/nixadmin-guide">Linux Sysadmin Main Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/linux-admin-roadmap">Linux Admin Roadmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops-guide">DevOps Guide</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Setting up Bind</h1></header><div class="markdown"><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>This guide assumes you&#x27;ve already gone through the <a href="/docs/base-vm-server-setup">base vm server setup</a> tutorial.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-bind"></a>Install BIND<a aria-hidden="true" tabindex="-1" class="hash-link" href="#install-bind" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">bind</span><span class="token plain"> bind-utils</span></div></div></div></div></div><p>This will install bind on a machine and any dependences needed, as well as its accompanying utility package <code>bind-utils</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configure-namedconf"></a>Configure named.conf<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configure-namedconf" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="add-an-acl"></a>Add an ACL<a aria-hidden="true" tabindex="-1" class="hash-link" href="#add-an-acl" title="Direct link to heading">#</a></h4><p>Allows dns request from the local network the BIND server is on. If this is being set up on a home network, then any device on the home network will be able to query the server.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">vi</span><span class="token plain"> /etc/named.conf</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">/etc/named.conf</div><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div class="prism-code language-clike codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">acl </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;trusted&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    localnets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configure-options-statement"></a>Configure <code>options</code> statement<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configure-options-statement" title="Direct link to heading">#</a></h4><p>Allow queries to be made on the local network interface and allow any queries from the &quot;trusted&quot; acl.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">/etc/named.conf</div><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div class="prism-code language-clike codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">options </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    listen</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">on port </span><span class="token number" style="color:rgb(247, 140, 108)">53</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">127.0</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//add the local network IP</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//do NOT include these 3 dots in the file, this is just just to indicate there is likely lines between these options.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    allow</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">query     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> trusted</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="include-a-local-zones-file"></a>Include a local zones file<a aria-hidden="true" tabindex="-1" class="hash-link" href="#include-a-local-zones-file" title="Direct link to heading">#</a></h4><p>Add the <code>named.conf.local</code> at the bottom of the <code>named.conf</code> file. This will be where zone files will be:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">/etc/named.conf</div><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div class="prism-code language-clike codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">include </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;named.conf.local&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><p>Note this is a relative path - so this will likely be in <code>/var/named/</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="create-local-named-file"></a>Create local named file<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-local-named-file" title="Direct link to heading">#</a></h3><p>This file will serve the local subnet the BIND server will be on. First zone statement will link the <code>internal.virtnet</code> domain file, second zone statement will create a reverse zone file. Both of these files will contain static information on the hosts we specify, specifically for the environments created within the how-to&#x27;s series.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">/var/named/named.conf.local</div><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div class="prism-code language-clike codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># This file should be empty when first created</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">zone </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;internal.virtnet&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type master</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    file </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;zones/internal.virtnet&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//relative zone file path</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">zone </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;16.172.in-addr.arpa&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type master</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    file </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;zones/16.172.rev&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//relative reverse zone file path for 172.16.0.0/16 subnet</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="forward-lookup-zone"></a>Forward lookup zone<a aria-hidden="true" tabindex="-1" class="hash-link" href="#forward-lookup-zone" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="create-zone-directory"></a>Create zone directory<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-zone-directory" title="Direct link to heading">#</a></h4><p>There is not /var/named/zones by default, so it must be created:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> /var/named/zones</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="create-forward-lookup-zone-file"></a>Create forward lookup zone file<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-forward-lookup-zone-file" title="Direct link to heading">#</a></h4><p>For the serial number, a common practice is to use the current date. For example, the serial number below means the file was last edited 2020, September 10th at 00 hours.
This has the added benefit fin that someone reading the config file will know right away when the last change was.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">/var/named/zones/internal.virtnet</div><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div class="prism-code language-clike codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$TTL    </span><span class="token number" style="color:rgb(247, 140, 108)">604800</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@       IN      SOA     dns</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">dhcp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> admin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token number" style="color:rgb(247, 140, 108)">2020091000</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Serial</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token number" style="color:rgb(247, 140, 108)">604800</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Refresh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token number" style="color:rgb(247, 140, 108)">86400</span><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Retry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token number" style="color:rgb(247, 140, 108)">2419200</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Expire</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token number" style="color:rgb(247, 140, 108)">604800</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Negative Cache TTL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> name servers </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> NS records</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    IN      NS      dns</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">dhcp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> name servers </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> A records</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dns</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">dhcp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">      IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.8</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token number" style="color:rgb(247, 140, 108)">16</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> A records</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">foreman</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">       IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.10</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ldap1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">         IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.11</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ldap2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">         IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.12</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">postgresql1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">   IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.13</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">postgresql2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">   IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.14</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">iscsitgt</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">nfs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">  IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.15</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">bacula</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">        IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.16</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">httpd1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">        IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.17</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">httpd2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">        IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.18</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tomcat1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">       IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.19</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tomcat2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">       IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.20</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">iptables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">      IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.21</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">postfix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">       IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.22</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">nagios</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">        IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.23</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">syslog</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">        IN      A       </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.24</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="reverse-zone-file"></a>Reverse zone file<a aria-hidden="true" tabindex="-1" class="hash-link" href="#reverse-zone-file" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">/var/named/zones/16.172.rev</div><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div class="prism-code language-clike codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$TTL    </span><span class="token number" style="color:rgb(247, 140, 108)">604800</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@       IN      SOA     internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> admin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        </span><span class="token number" style="color:rgb(247, 140, 108)">2020091000</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Serial</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        </span><span class="token number" style="color:rgb(247, 140, 108)">604800</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Refresh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        </span><span class="token number" style="color:rgb(247, 140, 108)">86400</span><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Retry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        </span><span class="token number" style="color:rgb(247, 140, 108)">2419200</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Expire</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    </span><span class="token number" style="color:rgb(247, 140, 108)">604800</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> Negative Cache TTL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> name servers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        IN      NS      dns</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">dhcp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> PTR Records</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">8.0</span><span class="token plain">     IN      PTR     dns</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">dhcp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.8</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">10.0</span><span class="token plain">    IN      PTR     foreman</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.10</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">11.0</span><span class="token plain">    IN      PTR     ldap1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.11</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">12.0</span><span class="token plain">    IN      PTR     ldap2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.12</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">13.0</span><span class="token plain">    IN      PTR     postgresql1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.13</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">14.0</span><span class="token plain">    IN      PTR     postgresql2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.14</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">15.0</span><span class="token plain">    IN      PTR     iscsitgt</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">nfs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.15</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">16.0</span><span class="token plain">    IN      PTR     bacula</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.16</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">17.0</span><span class="token plain">    IN      PTR     httpd1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.17</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">18.0</span><span class="token plain">    IN      PTR     httpd2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.18</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">19.0</span><span class="token plain">    IN      PTR     tomcat1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.19</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">20.0</span><span class="token plain">    IN      PTR     tomcat2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.20</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">21.0</span><span class="token plain">    IN      PTR     iptables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.21</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">22.0</span><span class="token plain">    IN      PTR     postfix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.22</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">23.0</span><span class="token plain">    IN      PTR     nagios</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.23</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">24.0</span><span class="token plain">    IN      PTR     syslog</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">virtnet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.24</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="check-bind-syntax"></a>Check BIND syntax<a aria-hidden="true" tabindex="-1" class="hash-link" href="#check-bind-syntax" title="Direct link to heading">#</a></h3><p>Double-check for any errors in the configuration:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> named-checkconf</span></div></div></div></div></div><p>If there are errors, <code>named-checkconf</code> will show something similar to this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/named.conf:66: missing &#x27;;&#x27; before end of file</span></div></div></div></div></div><p>In this case, the <code>/etc/named.conf</code> only had 65 lines, so <code>named-checkconf</code> is actually specifying the linked file <code>/var/named/named.conf.local</code>. The file was missing a semicolon at the end.</p><p>If <code>named-checkconf</code> has no response, then the configuration does not have any syntax errors.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="check-for-zone-errors"></a>Check for zone errors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#check-for-zone-errors" title="Direct link to heading">#</a></h3><p>If the configuration syntax checks out, it&#x27;s time to check for errors in the zone files.</p><p>First check the forward lookup zone:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> named-checkzone internal.virtnet /var/named/zones/internal.virtnet</span></div></div></div></div></div><p>Example output:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">zone internal.virtnet/IN: loaded serial 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OK</span></div></div></div></div></div><p>Now check the reverse lookup zone:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> named-checkzone </span><span class="token number" style="color:rgb(247, 140, 108)">16.172</span><span class="token plain">.in-addr.arpa /var/named/zones/16.172.rev</span></div></div></div></div></div><p>Example output:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">zone 16.172.in-addr.arpa/IN: loaded serial 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OK</span></div></div></div></div></div><p>If both commands reply <code>OK</code>, then it&#x27;s time to start BIND.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="start-and-enable-bind"></a>Start and Enable BIND<a aria-hidden="true" tabindex="-1" class="hash-link" href="#start-and-enable-bind" title="Direct link to heading">#</a></h3><p>First enable the <code>named</code> service, then start the service so it&#x27;s running.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">enable</span><span class="token plain"> named</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl start named</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="set-dns-to-resolve-to-self"></a>Set DNS to resolve to self<a aria-hidden="true" tabindex="-1" class="hash-link" href="#set-dns-to-resolve-to-self" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">/etc/sysconfig/network-scripts/ifcfg-eth0</div><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div class="prism-code language-text codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#Change DNS1 to localhost and optionally change DNS2 to secondary dns host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">DNS1=127.0.0.1 #Localhost</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">DNS2=172.16.0.1 #local DNS server, eg. router</span></div></div></div></div></div><p>Once the changes are complete, restart the network:</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Heads up!</h5></div><div class="admonition-content"><p>If you are connected via ssh you will <em>may</em> loose your connection. Be sure there is a way to access the vm without ssh (eg. using the console on the hypervisor) incase of a malformed network config file.</p></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl restart network</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="allow-dns-in-firewall"></a>Allow DNS in firewall<a aria-hidden="true" tabindex="-1" class="hash-link" href="#allow-dns-in-firewall" title="Direct link to heading">#</a></h3><p>In order to respond to DNS requests, the final step is to add the dns service in the firewall:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> firewall-cmd --permanent --add-service</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">dns</span></div></div></div></div></div><p>Now restart the firewall so the changes take effect:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> firewall-cmd --reload</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="testing"></a>Testing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#testing" title="Direct link to heading">#</a></h3><p>Time to test that BIND can respond to requests externally and reverse-lookups work:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">external host</div><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div class="prism-code language-bash codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">nslookup</span><span class="token plain"> foreman.internal.virtnet </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token plain">.0.8</span></div></div></div></div></div><p>A response should look something like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Server:         172.16.0.8</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Address:        172.16.0.8#53</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Name:   foreman.internal.virtnet</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Address: 172.16.0.10</span></div></div></div></div></div><p>Finally, test the reverse lookup zones are working properly:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">nslookup</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token plain">.0.10 </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token plain">.0.8</span></div></div></div></div></div><p>Response should look similar to this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">10.0.16.172.in-addr.arpa        name = foreman.internal.virtnet.</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="source"></a>Source<a aria-hidden="true" tabindex="-1" class="hash-link" href="#source" title="Direct link to heading">#</a></h3><ul><li><a href="https://www.digitalocean.com/community/tutorials/how-to-configure-bind-as-a-private-network-dns-server-on-centos-7" target="_blank" rel="noopener noreferrer">How to configure BIND</a><ul><li>Note the tutorial here is only for 1 DNS server, while on digital ocean is for 2.</li></ul></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/jeremyhager/yugawa-website/edit/master/docs/setting-up-bind.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/base-vm-server-setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Base vm server setup</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/maintaining-dns"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Maintaining DNS Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#install-bind" class="table-of-contents__link">Install BIND</a></li><li><a href="#configure-namedconf" class="table-of-contents__link">Configure named.conf</a></li><li><a href="#create-local-named-file" class="table-of-contents__link">Create local named file</a></li><li><a href="#forward-lookup-zone" class="table-of-contents__link">Forward lookup zone</a></li><li><a href="#reverse-zone-file" class="table-of-contents__link">Reverse zone file</a></li><li><a href="#check-bind-syntax" class="table-of-contents__link">Check BIND syntax</a></li><li><a href="#check-for-zone-errors" class="table-of-contents__link">Check for zone errors</a></li><li><a href="#start-and-enable-bind" class="table-of-contents__link">Start and Enable BIND</a></li><li><a href="#set-dns-to-resolve-to-self" class="table-of-contents__link">Set DNS to resolve to self</a></li><li><a href="#allow-dns-in-firewall" class="table-of-contents__link">Allow DNS in firewall</a></li><li><a href="#testing" class="table-of-contents__link">Testing</a></li><li><a href="#source" class="table-of-contents__link">Source</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Internal.Virtnet Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/nixadmin-guide/">Linux Sysadmin Guide</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 Jeremy Hager. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.9ed38f55.js"></script>
<script src="/runtime~main.3f7d2eb6.js"></script>
<script src="/main.43380630.js"></script>
<script src="/1.7218b6cd.js"></script>
<script src="/2.f67aa846.js"></script>
<script src="/78.cedd157f.js"></script>
<script src="/82.876600dc.js"></script>
<script src="/935f2afb.dc322b7b.js"></script>
<script src="/17896441.b2c94a2f.js"></script>
<script src="/078b6ab9.d9c4418b.js"></script>
</body>
</html>